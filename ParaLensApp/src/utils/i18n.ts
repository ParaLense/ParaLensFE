import { useMemo } from 'react';
import { useSettings } from '../contexts/SettingsContext';

type Dictionary = Record<string, Record<string, string>>;

const DICT: Dictionary = {
  en: {
    settings: 'Settings',
    theme: 'Theme',
    light: 'Light',
    dark: 'Dark',
    language: 'Language',
    german: 'German',
    english: 'English',
    history: 'History',
    camera: 'Camera',
    details: 'Details',
    fullScanDetails: 'Full Scan Details',
    noSelection: 'No selection',
    author: 'Author',
    date: 'Date',
    savedSections: 'Saved Sections',
    notAvailable: 'Not available',
    loadingCamera: 'Loading camera...',
    foundCameras: 'Found cameras:',
    noCameras: 'No cameras found.',
    unknown: 'Unknown',
    whatToScan: 'What do you want to scan?',
    selectFullScan: 'Select Full Scan',
    chooseFullScan: 'Choose Full Scan',
    noFullScans: 'No Full Scans available',
    close: 'Close',
    createNewFullScan: 'Create new Full Scan',
    cancel: 'Cancel',
    create: 'Create',
    change: 'Change',
    continue: 'Continue',
    guidedTour: 'Guided Tour',
    startTour: 'Start Tour',
    next: 'Next',
    back: 'Back',
    finish: 'Finish',
    skip: 'Skip',
    guide_welcome_title: 'Welcome',
    guide_welcome_body: 'This short tour will show you how to use the app.',
    guide_tabs_title: 'Navigation',
    guide_tabs_body: 'Use the buttons at the bottom to switch between History, Camera and Settings.',
    guide_camera_title: 'Camera',
    guide_camera_body: 'Open Camera to scan. Hold your device steady and follow on-screen hints.',
    guide_history_title: 'History',
    guide_history_body: 'Your previous scans are listed here. Tap one to view details or share.',
    guide_settings_title: 'Settings',
    guide_settings_body: 'Change theme and language here. You can start this guide anytime from Settings.',
    guide_done_title: 'All set!',
    guide_done_body: 'You are ready to start. You can run this guide again from Settings.',
  },
  de: {
    settings: 'Einstellungen',
    theme: 'Theme',
    light: 'Hell',
    dark: 'Dunkel',
    language: 'Sprache',
    german: 'Deutsch',
    english: 'Englisch',
    history: 'Verlauf',
    camera: 'Kamera',
    details: 'Details',
    fullScanDetails: 'Full Scan Details',
    noSelection: 'Keine Auswahl',
    author: 'Autor',
    date: 'Datum',
    savedSections: 'Gespeicherte Bereiche',
    notAvailable: 'Nicht vorhanden',
    loadingCamera: 'Kamera wird geladen...',
    foundCameras: 'Gefundene Kameras:',
    noCameras: 'Keine Kameras gefunden.',
    unknown: 'Unbekannt',
    whatToScan: 'Was möchten Sie scannen?',
    selectFullScan: 'Full Scan wählen',
    chooseFullScan: 'Full Scan auswählen',
    noFullScans: 'Keine Full Scans vorhanden',
    close: 'Schließen',
    createNewFullScan: 'Neuen Full Scan erstellen',
    cancel: 'Abbrechen',
    create: 'Erstellen',
    change: 'Ändern',
    continue: 'Weiter',
    guidedTour: 'Geführte Anleitung',
    startTour: 'Anleitung starten',
    next: 'Weiter',
    back: 'Zurück',
    finish: 'Fertig',
    skip: 'Überspringen',
    guide_welcome_title: 'Willkommen',
    guide_welcome_body: 'Diese kurze Anleitung zeigt Ihnen, wie Sie die App benutzen.',
    guide_tabs_title: 'Navigation',
    guide_tabs_body: 'Unten können Sie zwischen Verlauf, Kamera und Einstellungen wechseln.',
    guide_camera_title: 'Kamera',
    guide_camera_body: 'Öffnen Sie die Kamera zum Scannen. Halten Sie das Gerät ruhig und folgen Sie den Hinweisen.',
    guide_history_title: 'Verlauf',
    guide_history_body: 'Ihre früheren Scans sind hier gelistet. Tippen Sie, um Details zu sehen oder zu teilen.',
    guide_settings_title: 'Einstellungen',
    guide_settings_body: 'Hier ändern Sie Thema und Sprache. Sie können die Anleitung jederzeit neu starten.',
    guide_done_title: 'Alles bereit!',
    guide_done_body: 'Sie können jetzt starten. Die Anleitung ist jederzeit unter Einstellungen verfügbar.',
  },
};

export const useI18n = () => {
  const { language } = useSettings();
  const t = useMemo(() => {
    return (key: string): string => {
      const table = DICT[language] || DICT.en;
      return table[key] || key;
    };
  }, [language]);
  return { t };
};


